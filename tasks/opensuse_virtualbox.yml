---

# Instalando o Oracle Virtualbox

- name: Removendo dependencias antigas do Virtualbox
  shell: "zypper -n rm virtualbox-guest-kmp-default virtualbox-guest-tools"
  ignore_errors: yes 
  args:
    warn: false
  become: true
  tags:
    - virtualbox

- name: Instalando o Oracle Virtualbox
  zypper:
    name: "{{ pacotes_virtualbox }}"
    state: present
    force: yes
  become: true
  notify:
    - Adicionando usuario ao grupo 'vboxusers'
  tags:
    - virtualbox

# Instalando o Vagrant

- name: Instalando o Vagrant
  zypper:
    name: "https://releases.hashicorp.com/vagrant/{{ vagrant_version }}/vagrant_{{ vagrant_version }}_x86_64.rpm"
    state: present
    disable_gpg_check: yes
  become: true
  tags:
    - vagrant
    - virtualbox