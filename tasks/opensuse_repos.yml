---

# Adicionando Repositorio Packman

- name: Adicionando Repositorio Packman
  zypper_repository:
    name: packman
    repo: "{{ packman }}"
    state: present
    auto_import_keys: yes
    overwrite_multiple: yes
  become: true
  tags:
    - repo
    - packman
    - vivaldi
    - extras

# Adicionando o repositorio do Google Chrome

- name: Importando a chave do repositorio do Google Chrome
  rpm_key:
    key: https://dl.google.com/linux/linux_signing_key.pub
    state: present
  become: true
  tags:
    - repo
    - chrome
    - web

- name: Adicionando o repositório do Google Chrome
  zypper_repository:
    name: Google
    repo: http://dl.google.com/linux/chrome/rpm/stable/x86_64/
    state: present
    auto_import_keys: yes
    overwrite_multiple: yes
  become: true
  tags:
    - repo
    - chrome
    - web

# Adicionando o repositorio do Opera

- name: Importando a chave do repositorio do Opera
  rpm_key:
    key: https://rpm.opera.com/rpmrepo.key
    state: present
  become: true
  tags:
    - repo
    - opera
    - web

- name: Copiando arquivo de repositório do Opera
  copy:
    src: opera-rpm.repo
    dest: /etc/zypp/repos.d/opera.repo
    owner: root
    group: root
    mode: 0644
  become: true
  tags:
    - repo
    - opera
    - web


# Instalando o Skype

- name: Importando a chave GPG do repositorio do Skype
  rpm_key:
    key: https://repo.skype.com/data/SKYPE-GPG-KEY 
    state: present
    validate_certs: no
  become: true
  tags:
    - repo
    - skype

- name: Adicionando Repositorio do Skype
  zypper_repository:
    name: skypeforlinux
    repo: "https://repo.skype.com/rpm/stable"
    state: present
    auto_import_keys: yes
    overwrite_multiple: yes
  become: true
  tags:
    - repo
    - skype

# Adicionando o repositorio do Visual Studio Code

- name: Importando a chave do repositorio do Visual Studio Code
  rpm_key:
    key: https://packages.microsoft.com/keys/microsoft.asc
    state: present
  become: true
  tags:
    - repo
    - vscode
    - dev

- name: Copiando arquivo de repositório do Visual Studio Code
  copy:
    src: vscode-rpm.repo
    dest: /etc/zypp/repos.d/vscode.repo
    owner: root
    group: root
    mode: 0644
  become: true
  tags:
    - repo
    - vscode
    - dev

# Atualizando todos os repositorios

- name: Atualizando todos os repositorios
  zypper_repository:
    repo: '*'
    runrefresh: yes
    auto_import_keys: yes
  become: true
  tags:
    - repo
    - vivaldi
    - update